# Basic PostHog Analytics Integration for Eventasaurus

## Project Overview

Add basic PostHog analytics integration to track core user behaviors and events in the Eventasaurus application. This is the foundation setup that we can build upon later.

## Current State

- Eventasaurus is a Phoenix/LiveView application with Supabase auth
- No analytics tracking currently implemented
- Need to start tracking core user actions and events

## Technical Requirements

- Add PostHog dependency to Phoenix project
- Configure POSTHOG_API_KEY environment variable 
- Use PostHog EU endpoint: https://eu.i.posthog.com
- Implement both server-side (Elixir) and client-side (JavaScript) tracking

## Core Features to Implement

### 1. Basic PostHog Setup
- Add PostHog HTTP client dependency to mix.exs
- Configure environment variables in config files
- Initialize PostHog JavaScript SDK in assets/js/app.js
- Add PostHog script to root.html.heex layout

### 2. User Identification
- Identify authenticated users with their Supabase ID
- Track anonymous users with session-based identifiers
- Handle user login/logout identification changes

### 3. Core Event Tracking
- **Authentication Events**: user_registered, user_logged_in, user_logged_out
- **Event Management**: event_created, event_published, event_theme_changed
- **Critical Business Events**: ticket_purchased, payment_succeeded, payment_failed
- **Basic Engagement**: event_viewed, dashboard_visited

### 4. PostHog Service Module
- Create a PostHog service module for server-side tracking
- Implement error handling and graceful fallbacks
- Ensure analytics don't block user experience

## Success Criteria

- PostHog is successfully configured and receiving events
- Core user actions are being tracked
- Analytics don't impact application performance
- Foundation is ready for future enhancements

## Files to Modify

- mix.exs (add PostHog dependency)
- config/config.exs and config/runtime.exs (configuration)
- assets/js/app.js (JavaScript SDK)
- lib/eventasaurus_web/components/layouts/root.html.heex (script tag)
- lib/eventasaurus_app/services/ (new PostHog service module)
- Authentication and event modules (add tracking calls)

## Implementation Notes

- Use async event tracking to avoid blocking user interactions
- Implement proper error handling if PostHog is unavailable
- Follow data privacy best practices
- Start simple and build upon this foundation
